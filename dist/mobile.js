window.onload=function(){function e(){for(var e=document.body.scrollTop||window.pageYOffset||document.documentElement.scrollTop,t=document.body.clientHeight||document.documentElement.clientHeight,n=0;n<u.length;n++)if(u[n].offsetTop<e+t)for(var l=0;l<u[n].getElementsByTagName("img").length;l++)u[n].getElementsByTagName("img")[l].getAttribute("data-src")&&(u[n].getElementsByTagName("img")[l].style.backgroundColor="blue",u[n].getElementsByTagName("img")[l].src=u[n].getElementsByTagName("img")[l].getAttribute("data-src"),u[n].getElementsByTagName("img")[l].removeAttribute("data-src"))}function t(){m||(3==s?s=1:s+=1,n(),l(-6))}function n(){for(var e=0;e<i.length;e++)"on"==i[e].className&&(i[e].className="");i[s-1].className="on"}function l(e){function t(){e<0&&+c.style.left.replace("rem","")>n||e>0&&+c.style.left.replace("rem","")<n?(c.style.left=+c.style.left.replace("rem","")+r+"rem",setTimeout(t,o)):(m=!1,c.style.left=n+"rem",n>-6&&(c.style.left="-18rem"),n<-18&&(c.style.left="-6rem"))}if(0!==e){m=!0;var n=+c.style.left.replace("rem","")+e,l=200,o=10,r=e/(l/o);t()}}function o(){a=setInterval(function(){t()},5e3)}function r(){clearInterval(a)}var a,c=(document.querySelector("#slider"),document.querySelector("#box")),i=document.getElementById("buttons").querySelectorAll("[data-index]"),s=1,m=!1,u=document.querySelectorAll("li");window.onscroll=function(){e()};var f;c.addEventListener("touchstart",function(e){c.style.width=0,f=e.targetTouches[0].pageX,r()}),c.addEventListener("touchmove",function(e){var o=e.targetTouches[0].pageX-f;if(e.preventDefault(),o>0){if(m)return;1==s?s=3:s-=1,n(),l(6)}else o<0&&t()}),c.addEventListener("touchend",function(){o()});for(var d=0;d<i.length;d++)i[d].onclick=function(){if("on"!=this.className){var e=parseInt(this.getAttribute("data-index")),t=-6*(e-s);s=e,n(),m||l(t)}};o()};